# BCC-5 マルチスレッドオンライン・シングルスレッドバッチ

## 目的
オンライン処理の書き込みがバッチ処理の書き込みと衝突したときにおけるオンライン処理書き込み性能への影響を測定する。

## 実施内容
- マルチスレッドのオンライン処理、シングルスレッドのバッチ処理で動かす。
- 各処理スレッドはそれぞれ基本的に専用となるテーブル領域を持ち、オンライン処理は確率的にバッチテーブル領域に書き込みを行う。

## 内部パラメーター設定
- 内部パラメーターは内部的にハードコードされていて不変なものとする。
- スレッド数: 112 (想定環境 dbs12 の物理コア最大数)
- トランザクションサイズ
  - オンライン処理 1 writes / tx
  - バッチ処理 1000 writes / tx
  - 目的に対して、オンライン処理のトランザクションサイズを長大させる必要は無い。同様にバッチ処理も目的の事象を観測可能な最小限に設定し、開発速度を下げない。
- スレッドごとにテーブルを持ち、テーブルサイズは 1000 records / table
- key size 8 bytes, value size 8 bytes. メモリアロケーターコンポーネントの影響を最小化する意図である。

## 外部パラメーター設定
- 外部パラメーターはコマンド引数で gflags によって与えるものとする。
- 衝突確率(cr): その確率で他のバッチ領域に対して書き込みを行う。
- 実験時間（duration[sec]）: データを測定する時間。

## 生成するグラフ
- graph.plt によって生成されるグラフ。
- 横軸が衝突確立、縦軸がオンライン処理総スループット。